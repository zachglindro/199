<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
    <link rel="stylesheet" href="css/custom.css" />
    <link rel="stylesheet" href="css/crdts.css" />
  </head>

  <body>
    <div class="reveal" role="region" aria-label="Presentation slides">
      <div class="slides">
        <!-- Slide 1 -->
        <section>
          <h3>CRDT<span style="text-transform: lowercase">s</span></h3>
          <p>Enabling Collaboration in a Decentralized Systems</p>
          <p>
            <small>Zach Glindro</small>
          </p>
        </section>

        <!-- Slide 2 -->
        <section>
          <section>
            <div class="icons-row" aria-hidden="false">
              <figure class="icon-figure">
                <img src="assets/git.png" alt="git icon" class="slide-icon" />
                <figcaption>git</figcaption>
              </figure>
              <figure class="icon-figure">
                <img
                  src="assets/github.png"
                  alt="github icon"
                  class="slide-icon"
                />
                <figcaption>github</figcaption>
              </figure>
            </div>
          </section>
          <section>
            <div class="console" id="console">
              <pre class="console-output" id="console-output"></pre>
              <div class="console-input">
                $ <span id="console-caret"></span>
              </div>
            </div>
          </section>
        </section>

        <!-- Slide 3-->
        <section>
          <section>
            <div class="center-graphic">
              <svg
                viewBox="0 0 600 360"
                class="network-svg"
                aria-hidden="true"
                role="img"
                aria-label="Network diagram"
              >
                <defs>
                  <filter id="glow">
                    <feGaussianBlur stdDeviation="4" result="coloredBlur" />
                    <feMerge>
                      <feMergeNode in="coloredBlur" />
                      <feMergeNode in="SourceGraphic" />
                    </feMerge>
                  </filter>
                </defs>
                <!-- links (rendered first so they appear behind nodes) -->
                <line
                  class="link offline"
                  data-from="c1"
                  x1="120"
                  y1="80"
                  x2="300"
                  y2="180"
                />
                <line
                  class="link offline"
                  data-from="c2"
                  x1="480"
                  y1="80"
                  x2="300"
                  y2="180"
                />
                <line
                  class="link offline"
                  data-from="c3"
                  x1="300"
                  y1="300"
                  x2="300"
                  y2="180"
                />
                <!-- central server -->
                <g id="server" class="offline" transform="translate(300,180)">
                  <rect
                    x="-36"
                    y="-22"
                    width="72"
                    height="44"
                    rx="6"
                    ry="6"
                    class="server-box"
                  />
                  <text x="0" y="6" text-anchor="middle" class="server-label">
                    Server
                  </text>
                </g>
                <!-- clients -->
                <g
                  class="client offline"
                  data-id="c1"
                  transform="translate(120,80)"
                >
                  <circle r="18" class="client-dot" />
                  <text y="34" text-anchor="middle" class="client-label">
                    A
                  </text>
                </g>
                <g
                  class="client offline"
                  data-id="c2"
                  transform="translate(480,80)"
                >
                  <circle r="18" class="client-dot" />
                  <text y="34" text-anchor="middle" class="client-label">
                    B
                  </text>
                </g>
                <g
                  class="client offline"
                  data-id="c3"
                  transform="translate(300,300)"
                >
                  <circle r="18" class="client-dot" />
                  <text y="34" text-anchor="middle" class="client-label">
                    C
                  </text>
                </g>
              </svg>
            </div>
          </section>
          <section>
            <p class="inline-text">Strong consistency</p>
          </section>
          <section data-auto-animate>
            <div class="icons-row" aria-hidden="false">
              <figure class="icon-figure">
                <img src="assets/docs.svg" alt="docs icon" class="slide-icon" />
                <figcaption data-id="docs-slide3-id">docs</figcaption>
              </figure>
            </div>
          </section>
          <section data-auto-animate>
            <div class="icons-row" aria-hidden="false">
              <figure class="icon-figure">
                <img src="assets/docs.svg" alt="docs icon" class="slide-icon" />
                <figcaption data-id="docs-slide3-id">docs</figcaption>
              </figure>
              <div>
                <p>No offline access</p>
                <p>Loss of data ownership</p>
                <p>Service dependency</p>
              </div>
            </div>
          </section>
        </section>

        <!-- Slide 4: Eventual consistency -->
        <section>
          <section><p>Eventual consistency</p></section>
          <section>
            <!-- Slide 4: Interactive replicas figure -->
            <div class="replicas-figure center-graphic">
              <div class="replicas-row">
                <div class="replica" data-id="A">
                  <div class="replica-header">
                    Replica A
                    <span class="status-badge online" aria-hidden="true"
                      >Online</span
                    >
                  </div>
                  <ul class="replica-list" aria-live="polite">
                    <li>Milk</li>
                  </ul>
                </div>

                <div class="replica" data-id="B">
                  <div class="replica-header">
                    Replica B
                    <span class="status-badge online" aria-hidden="true"
                      >Online</span
                    >
                  </div>
                  <ul class="replica-list" aria-live="polite">
                    <li>Milk</li>
                  </ul>
                </div>

                <div class="replica" data-id="C">
                  <div class="replica-header">
                    Replica C
                    <span class="status-badge online" aria-hidden="true"
                      >Online</span
                    >
                  </div>
                  <ul class="replica-list" aria-live="polite">
                    <li>Milk</li>
                  </ul>
                </div>
              </div>

              <div class="replica-connections" aria-hidden="true">
                <svg
                  class="replica-lines"
                  viewBox="0 0 600 120"
                  preserveAspectRatio="none"
                  role="img"
                  aria-hidden="true"
                >
                  <!-- lines between centers of boxes -->
                  <line
                    id="line-ab"
                    class="line"
                    x1="100"
                    y1="60"
                    x2="300"
                    y2="60"
                    stroke-width="3"
                    stroke-linecap="round"
                  />
                  <line
                    id="line-bc"
                    class="line"
                    x1="300"
                    y1="60"
                    x2="500"
                    y2="60"
                    stroke-width="3"
                    stroke-linecap="round"
                  />
                </svg>
              </div>

              <div class="replica-controls">
                <button id="replica-btn" class="replica-button">
                  <span>&rarr;</span>
                </button>
              </div>
            </div>
          </section>
        </section>

        <!-- Slide 5 -->
        <section>
          <!-- step 1: single word CRDT -->
          <section data-auto-animate>
            <div class="crdts-stack">
              <div class="crdts-row">
                <span class="crdts-letter" data-id="letter-C">C</span>
                <span class="crdts-letter" data-id="letter-R">R</span>
                <span class="crdts-letter" data-id="letter-D">D</span>
                <span class="crdts-letter" data-id="letter-T">T</span>
              </div>
            </div>
          </section>

          <!-- step 2: full words laid out vertically (letters kept as same elements for auto-animate) -->
          <section data-auto-animate>
            <div class="crdts-stack">
              <div class="crdts-words">
                <div>
                  <span>
                    <span class="crdts-letter" data-id="letter-C">C</span>
                    <span class="crdts-tail">onflict-free</span>
                  </span>
                </div>
                <div>
                  <span>
                    <span class="crdts-letter" data-id="letter-R">R</span>
                    <span class="crdts-tail">eplicated</span>
                  </span>
                </div>
                <div>
                  <span>
                    <span class="crdts-letter" data-id="letter-D">D</span>
                    <span class="crdts-tail">ata</span>
                  </span>
                </div>
                <div>
                  <span>
                    <span class="crdts-letter" data-id="letter-T">T</span>
                    <span class="crdts-tail">ypes</span>
                  </span>
                </div>
              </div>
            </div>
          </section>
          <!-- step 3: dim 'Replicated Data Types' and highlight 'Conflict-free' -->
          <section data-auto-animate>
            <div class="crdts-stack">
              <div class="crdts-words">
                <div>
                  <span>
                    <span
                      class="crdts-letter crdts-highlight"
                      data-id="letter-C"
                      >C</span
                    >
                    <span class="crdts-tail">onflict-free</span>
                  </span>
                </div>
                <div>
                  <span>
                    <span class="crdts-letter crdts-dim" data-id="letter-R"
                      >R</span
                    >
                    <span class="crdts-tail">eplicated</span>
                  </span>
                </div>
                <div>
                  <span>
                    <span class="crdts-letter crdts-dim" data-id="letter-D"
                      >D</span
                    >
                    <span class="crdts-tail">ata</span>
                  </span>
                </div>
                <div>
                  <span>
                    <span class="crdts-letter crdts-dim" data-id="letter-T"
                      >T</span
                    >
                    <span class="crdts-tail">ypes</span>
                  </span>
                </div>
              </div>
            </div>
          </section>
          <section>
            <p>Strong eventual consistency</p>
          </section>
        </section>

        <!-- Slide 6 -->
        <section>
          <section>
            <p>Operation-based CRDTs</p>
          </section>
          <!-- New subsections: minimal demo for Alice & Bob -->
          <section data-auto-animate>
            <div class="mini-demo center-graphic">
              <div class="two-lists">
                <div class="person" id="alice" data-id="person-alice">
                  <div class="person-name" data-id="name-alice">Alice</div>
                  <ul class="tasks">
                    <li class="task" data-id="t1">
                      <span class="task-title">Buy milk</span>
                    </li>
                  </ul>
                </div>
                <div class="person" id="bob" data-id="person-bob">
                  <div class="person-name" data-id="name-bob">Bob</div>
                  <ul class="tasks">
                    <li class="task" data-id="t1">
                      <span class="task-title">Buy milk</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <!-- local edits: Alice adds time, Bob adds comment -->
          <section data-auto-animate>
            <div class="mini-demo center-graphic">
              <div class="two-lists">
                <div class="person" id="alice" data-id="person-alice">
                  <div class="person-name" data-id="name-alice">Alice</div>
                  <ul class="tasks">
                    <li class="task" data-id="t1">
                      <span class="task-title">Buy milk</span>
                      <span class="task-meta"
                        >— <em class="meta-time">8:00 AM</em></span
                      >
                    </li>
                  </ul>
                </div>
                <div class="person" id="bob" data-id="person-bob">
                  <div class="person-name" data-id="name-bob">Bob</div>
                  <ul class="tasks">
                    <li class="task" data-id="t1">
                      <span class="task-title">Buy milk</span>
                      <span class="task-meta"
                        >—
                        <em class="meta-comment"
                          >Don't forget almond milk</em
                        ></span
                      >
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <!-- after sync: both appear -->
          <section data-auto-animate>
            <div class="mini-demo center-graphic">
              <div class="two-lists">
                <div class="person" id="alice" data-id="person-alice">
                  <div class="person-name" data-id="name-alice">Alice</div>
                  <ul class="tasks">
                    <li class="task merged" data-id="t1">
                      <span class="task-title">Buy milk</span>
                      <span class="task-meta"
                        >— <em class="meta-time">8:00 AM</em>;
                        <em class="meta-comment"
                          >Don't forget almond milk</em
                        ></span
                      >
                    </li>
                  </ul>
                </div>
                <div class="person" id="bob" data-id="person-bob">
                  <div class="person-name" data-id="name-bob">Bob</div>
                  <ul class="tasks">
                    <li class="task merged" data-id="t1">
                      <span class="task-title">Buy milk</span>
                      <span class="task-meta"
                        >— <em class="meta-time">8:00 AM</em>;
                        <em class="meta-comment"
                          >Don't forget almond milk</em
                        ></span
                      >
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </section>
        </section>

        <!-- Slide 7 -->
        <section>
          <section>
            <p>State-based CRDTs</p>
            <aside class="notes">
              Now let's look at the other main type: state-based. Here, instead
              of sending small operations, replicas send their entire state to
              each other and merge them. The simplest example is a grow-only
              set, where the merge is a set union.
            </aside>
          </section>

          <!-- Initial state: Same as before -->
          <section data-auto-animate>
            <div class="mini-demo center-graphic">
              <div class="two-lists">
                <div class="person" id="alice-s7" data-id="person-alice-s7">
                  <div class="person-name" data-id="name-alice-s7">Alice</div>
                  <ul class="tasks">
                    <li class="task" data-id="s7-t1">
                      <span class="task-title">Buy milk</span>
                    </li>
                  </ul>
                </div>
                <div class="person" id="bob-s7" data-id="person-bob-s7">
                  <div class="person-name" data-id="name-bob-s7">Bob</div>
                  <ul class="tasks">
                    <li class="task" data-id="s7-t1">
                      <span class="task-title">Buy milk</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <!-- local edits: Alice adds 'Get bread', Bob adds 'Wash car' -->
          <section data-auto-animate>
            <div class="mini-demo center-graphic">
              <div class="two-lists">
                <div class="person" id="alice-s7" data-id="person-alice-s7">
                  <div class="person-name" data-id="name-alice-s7">Alice</div>
                  <ul class="tasks">
                    <li class="task" data-id="s7-t1">
                      <span class="task-title">Buy milk</span>
                    </li>
                    <!-- Alice's new state includes a new item -->
                    <li class="task" data-id="s7-t2">
                      <span class="task-title">Get bread</span>
                    </li>
                  </ul>
                </div>
                <div class="person" id="bob-s7" data-id="person-bob-s7">
                  <div class="person-name" data-id="name-bob-s7">Bob</div>
                  <ul class="tasks">
                    <li class="task" data-id="s7-t1">
                      <span class="task-title">Buy milk</span>
                    </li>
                    <!-- Bob's new state includes a different new item -->
                    <li class="task" data-id="s7-t3aa">
                      <span class="task-title">Wash car</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <aside class="notes">
              While offline, Alice realizes she needs bread and adds it. Her
              state is now {milk, bread}. Concurrently, Bob adds 'Wash car' to
              his list. His state is {milk, car}. Notice they are changing the
              state of the whole list, not just one item.
            </aside>
          </section>

          <!-- after sync: states are merged (set union) -->
          <section data-auto-animate>
            <div class="mini-demo center-graphic">
              <div class="two-lists">
                <div class="person" id="alice-s7" data-id="person-alice-s7">
                  <div class="person-name" data-id="name-alice-s7">Alice</div>
                  <ul class="tasks merged">
                    <li class="task" data-id="s7-t1">
                      <span class="task-title">Buy milk</span>
                    </li>
                    <li class="task" data-id="s7-t2">
                      <span class="task-title">Get bread</span>
                    </li>
                    <li class="task" data-id="s7-t3">
                      <span class="task-title">Wash‎ car</span>
                    </li>
                  </ul>
                </div>
                <div class="person" id="bob-s7" data-id="person-bob-s7">
                  <div class="person-name" data-id="name-bob-s7">Bob</div>
                  <ul class="tasks merged">
                    <li class="task" data-id="s7-t1">
                      <span class="task-title">Buy milk</span>
                    </li>
                    <li class="task" data-id="s7-t2">
                      <span class="task-title">Get bread</span>
                    </li>
                    <li class="task" data-id="s7-t3">
                      <span class="task-title">Wash car</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <aside class="notes">
              When they sync, Alice sends her entire state to Bob, and Bob sends
              his to Alice. The merge function is a simple union of the two
              sets. The result is a list containing all three items, which is
              the same for both of them. They have converged.
            </aside>
          </section>
        </section>

        <!-- Slide 8 -->
        <section>
          <section>
            <p>Examples</p>
          </section>
          <section>
            <div class="icons-row" aria-hidden="false">
              <figure class="icon-figure">
                <img
                  src="assets/Apple_Notes_icon.svg"
                  alt="Apple Notes icon"
                  class="slide-icon"
                />
                <figcaption>apple notes</figcaption>
              </figure>
              <figure class="icon-figure">
                <img
                  src="assets/apple_notes.gif"
                  alt="Apple Notes demo GIF"
                  class="slide-gif"
                />
                <figcaption>
                  ... and possibly apple reminders and photos?
                </figcaption>
              </figure>
            </div>
          </section>
          <section>
            <div class="icons-row" aria-hidden="false">
              <figure class="icon-figure">
                <img
                  src="assets/zed.png"
                  alt="Zed editor icon"
                  class="slide-icon zed-icon"
                />
                <figcaption>zed</figcaption>
              </figure>
              <figure class="icon-figure">
                <video
                  src="assets/zed%20demo.webm"
                  aria-label="Zed demo video"
                  controls
                ></video>
                <figcaption>zed demo</figcaption>
              </figure>
            </div>
          </section>
        </section>

        <!-- Slide 9 -->
        <section>
          <section
            data-background-iframe="assets/sites/login.htm"
            data-background-interactive
          >
            <!-- Fake browser address bar to signal an actual site -->
            <div
              style="
                position: absolute;
                top: -55px;
                left: 50%;
                transform: translateX(-50%);
                width: 70%;
                max-width: 920px;
                z-index: 20;
              "
            >
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  background: rgba(255, 255, 255, 0.92);
                  color: #222;
                  border-radius: 8px;
                  padding: 8px 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
                  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI',
                    Roboto, 'Helvetica Neue', Arial;
                  font-size: 13px;
                "
              >
                <div
                  style="
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    background: #ff5f56;
                    box-shadow: 0 0 0 6px rgba(255, 95, 86, 0.03) inset;
                  "
                ></div>
                <div
                  style="
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    background: #ffbd2e;
                  "
                ></div>
                <div
                  style="
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    background: #27c93f;
                  "
                ></div>
                <div
                  style="
                    flex: 1;
                    margin-left: 6px;
                    color: #444;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                  "
                >
                  cereals-inventory.vercel.app
                </div>
                <div style="margin-left: 8px; color: #777; font-size: 12px">
                  ⎘
                </div>
              </div>
            </div>
            <div
              style="
                position: absolute;
                bottom: -600px;
                left: -150px;
                width: 40%;
                box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5),
                  0 5px 25px rgba(0, 0, 0, 0.2);
                background-color: rgba(0, 0, 0, 0.9);
                color: #fff;
                padding: 20px;
                font-size: 20px;
                text-align: left;
              "
            >
              <p>Cereals Inventory web app</p>
            </div>
          </section>
          <section
            data-background-iframe="assets/sites/Cereals%20Inventory%20System.htm"
            data-background-interactive
          >
            <!-- Fake browser address bar to signal an actual site -->
            <div
              style="
                position: absolute;
                top: -55px;
                left: 50%;
                transform: translateX(-50%);
                width: 70%;
                max-width: 920px;
                z-index: 20;
              "
            >
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  background: rgba(255, 255, 255, 0.92);
                  color: #222;
                  border-radius: 8px;
                  padding: 8px 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
                  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI',
                    Roboto, 'Helvetica Neue', Arial;
                  font-size: 13px;
                "
              >
                <div
                  style="
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    background: #ff5f56;
                  "
                ></div>
                <div
                  style="
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    background: #ffbd2e;
                  "
                ></div>
                <div
                  style="
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    background: #27c93f;
                  "
                ></div>
                <div
                  style="
                    flex: 1;
                    margin-left: 6px;
                    color: #444;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                  "
                >
                  cereals-inventory.vercel.app/dashboard
                </div>
                <div style="margin-left: 8px; color: #777; font-size: 12px">
                  ⎘
                </div>
              </div>
            </div>
            <div
              style="
                position: absolute;
                bottom: -600px;
                left: -150px;
                width: 40%;
                right: 0;
                box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5),
                  0 5px 25px rgba(0, 0, 0, 0.2);
                background-color: rgba(0, 0, 0, 0.9);
                color: #fff;
                padding: 20px;
                font-size: 20px;
                text-align: left;
              "
            >
              <p>Cereals Inventory web app</p>
            </div>
          </section>
        </section>

        <!-- Slide 11: Conclusion - small replica of slide 5 steps shifted left -->
        <section>
          <!-- Step 1: single word CRDT (left-shifted for emphasis) -->
          <section data-auto-animate>
            <div class="crdts-stack left-shift">
              <div class="crdts-row">
                <span class="crdts-letter" data-id="letter-C-s11">C</span>
                <span class="crdts-letter" data-id="letter-R-s11">R</span>
                <span class="crdts-letter" data-id="letter-D-s11">D</span>
                <span class="crdts-letter" data-id="letter-T-s11">T</span>
              </div>
            </div>
          </section>

          <!-- Step 2: full words vertically (letters kept as same elements for auto-animate), also left-shifted -->
          <section data-auto-animate>
            <div class="crdts-stack left-shift">
              <div class="crdts-words">
                <div>
                  <span>
                    <span class="crdts-letter" data-id="letter-C-s11">C</span>
                    <span class="crdts-tail">onflict-free</span>
                  </span>
                </div>
                <div>
                  <span>
                    <span class="crdts-letter" data-id="letter-R-s11">R</span>
                    <span class="crdts-tail">eplicated</span>
                  </span>
                </div>
                <div>
                  <span>
                    <span class="crdts-letter" data-id="letter-D-s11">D</span>
                    <span class="crdts-tail">ata</span>
                  </span>
                </div>
                <div>
                  <span>
                    <span class="crdts-letter" data-id="letter-T-s11">T</span>
                    <span class="crdts-tail">ypes</span>
                  </span>
                </div>
              </div>
            </div>
          </section>
        </section>

        <!-- Slide 12 -->
        <section>
          <p>Thank you!</p>
          <p>Q & A</p>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="js/custom/crdts.js"></script>

    <script src="js/custom/network.js"></script>
    <script src="js/custom/console-sim.js"></script>
    <script src="js/custom/replicas.js"></script>
  </body>
</html>
